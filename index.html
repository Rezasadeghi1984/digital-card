<!DOCTYPE html>
<html lang="fa">
<head>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>کارت ویزیت</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="business-card">
        <div class="header">
            <div class="right-section">
                <img src="./assets/MyPic.JPG" alt="رضا صادقی" class="profile-pic">
                <div class="name-section">
                    <span class="name">رضا صادقی</span>
                    <span class="subtitle">بازرگانی هوم پلاس</span>
                </div>
            </div>
            <div class="lion-icon" onclick="shareCard()">
                <img src="./assets/share.png" alt="شیر" style="width: 50px; height: 50px;">
            </div>
        </div>

        <!-- لوگو وسط صفحه -->
        <div class="logo-container">
            <img src="./assets/Logo.png" alt="لوگو" class="logo">
        </div>

        <!-- متن زیر لوگو -->
        <div class="import-text">
            واردات کالا مستقیم از چین و امارات
        </div>

        <!-- شماره تلفن و آیکون ذخیره -->
        <div class="phone-section">
            <div class="phone-item">
                <a href="tel:09133840366" class="phone-link">09133840366</a>
                <div class="save-contact" onclick="saveContact('رضا صادقی', '09133840366')">
                    <i class="fas fa-user-plus"></i>
                </div>
            </div>
        </div>

        <!-- شماره تلفن دوم -->
        <div class="phone-section">
            <div class="phone-item">
                <a href="tel:09365098808" class="phone-link">09365098808</a>
                <div class="save-contact" onclick="saveContact('رضا صادقی', '09365098808')">
                    <i class="fas fa-user-plus"></i>
                </div>
            </div>
        </div>

        <!-- شبکه‌های اجتماعی -->
        <div class="social-section">
            <div class="social-container">
                <!-- واتساپ -->
                <a href="https://wa.me/989365098808" class="social-item" target="_blank">
                    <img src="./assets/whatsapp.png" alt="واتساپ" class="social-icon">
                </a>

                <!-- اینستاگرام -->
                <a href="https://instagram.com/Home1Plus" class="social-item" target="_blank">
                    <img src="./assets/instagram.png" alt="اینستاگرام" class="social-icon">
                </a>

                <!-- تلگرام -->
                <a href="https://t.me/09365098808" class="social-item" target="_blank">
                    <img src="./assets/telegram.png" alt="تلگرام" class="social-icon">
                </a>

                <!-- ویچت -->
                <div class="social-item" onclick="copyWechatId()">
                    <img src="./assets/wechat.png" alt="ویچت" class="social-icon">
                </div>
            </div>
        </div>

        <!-- آدرس سایت -->
        <div class="website-section">
            <a href="https://www.HomePlus-Shop.ir" class="website-link" target="_blank">
                www.HomePlus-Shop.ir
            </a>
        </div>

        <!-- آدرس فیزیکی -->
        <div class="address-section">
            <a href="https://maps.google.com/?q=26.937831313545484,56.273848376665676" class="address-link" target="_blank">
                قشم-سیتی سنتر2-لاینA-پلاک1780
            </a>
        </div>

        <!-- کیوآرکد ویچت -->
        <div class="qrcode-section">
            <img src="./assets/WeChatQR.png" alt="کیوآرکد ویچت" class="qrcode">
        </div>

    </div>

    <script>
        //000000000000000000000000000000000000000000000000000000000000000000000000000000
        function shareCard() {
            // اضافه کردن انیمیشن به آیکون
            const lionIcon = document.querySelector('.lion-icon');
            lionIcon.style.transform = 'scale(0.9)';

            setTimeout(() => {
                lionIcon.style.transform = 'scale(1)';
            }, 150);

            // اول سعی کن منوی اشتراک‌گذاری native رو نشون بدی
            if (navigator.share) {
                navigator.share({
                    title: 'رضا صادقی - بازرگانی هوم پلاس',
                    text: 'کارت ویزیت دیجیتال 📱\nواردات کالا مستقیم از چین و امارات 🚢',
                    url: window.location.href
                })
                    .then(() => {
                        console.log('اشتراک‌گذاری موفق ✅');
                    })
                    .catch((error) => {
                        console.log('خطا در اشتراک‌گذاری', error);
                        if (error.name !== 'AbortError') {
                            // اگر خطا غیر از cancel کردن بود، لینک رو کپی کن
                            copyLinkToClipboard();
                        }
                    });
            } else {
                // اگر مرورگر از share پشتیبانی نمی‌کند، لینک رو کپی کن
                copyLinkToClipboard();
            }
        }

        // تابع جداگانه برای کپی کردن لینک
        function copyLinkToClipboard() {
            const shareText = `🦁 رضا صادقی - بازرگانی هوم پلاس\n📱 کارت ویزیت دیجیتال\n🚢 واردات کالا مستقیم از چین و امارات\n🌐 ${window.location.href}`;

            navigator.clipboard.writeText(shareText)
                .then(() => {
                    alert('مرورگر شما از اشتراک‌گذاری مستقیم پشتیبانی نمی‌کند.\n\nلینک کارت ویزیت کپی شد! می‌توانید در شبکه‌های اجتماعی به اشتراک بگذارید. 📤');
                })
                .catch(() => {
                    // روش fallback برای مرورگرهای قدیمی
                    const tempInput = document.createElement('textarea');
                    tempInput.value = shareText;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);

                    alert('مرورگر شما از اشتراک‌گذاری مستقیم پشتیبانی نمی‌کند.\n\nلینک کارت ویزیت کپی شد! می‌توانید در شبکه‌های اجتماعی به اشتراک بگذارید. 📤');
                });
        }
        //000000000000000000000000000000000000000000000000000000000000000000000000000000
        //تابع ذخیره شماره تلفن ها
        function saveContact(name, phone) {
            // ابتدا سعی می‌کنیم از روش مستقیم استفاده کنیم
            if (tryDirectContactSave(name, phone)) {
                return;
            }

            // اگر روش مستقیم کار نکرد، از روش فایل vcf استفاده می‌کنیم
            if (confirm(`ذخیره خودکار مخاطب در دستگاه شما پشتیبانی نمی‌شود.\n\nراه جایگزین: فایل مخاطب دانلود خواهد شد. پس از دانلود، آن را باز کنید تا "${name}" به لیست مخاطبین شما اضافه شود.`)) {
                const vCard = `BEGIN:VCARD\nVERSION:3.0\nFN:${name}\nTEL:${phone}\nEND:VCARD`;
                const blob = new Blob([vCard], { type: 'text/vcard' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${name}.vcf`;
                link.click();
                URL.revokeObjectURL(url);
            }
        }

        function tryDirectContactSave(name, phone) {
            // تشخیص آیفون
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);

            // روش 1: Web Share API (برای همه دستگاه‌های مدرن)
            if (navigator.share) {
                try {
                    navigator.share({
                        title: `ذخیره مخاطب: ${name}`,
                        text: `نام: ${name}\nشماره: ${phone}`,
                        url: window.location.href
                    });
                    return true;
                } catch (e) {
                    if (e.name !== 'AbortError') {
                        // خطای غیر از cancel
                    }
                }
            }

            // روش 2: برای اندروید (intent)
            if (!isIOS) {
                try {
                    const intentUrl = `intent://insert/?name=${encodeURIComponent(name)}&phone=${phone}#Intent;scheme=content;package=com.android.contacts;action=android.intent.action.INSERT;type=vnd.android.cursor.dir/contact;S.name=${encodeURIComponent(name)};S.phone=${phone};end;`;
                    window.location.href = intentUrl;
                    return true;
                } catch (e) {
                    // ادامه به روش بعدی
                }
            }

            // روش 3: برای آیفون - فقط شماره را پیش‌پر می‌کند
            if (isIOS) {
                try {
                    window.location.href = `tel:${phone}`;
                    // بعد از 1 ثانیه برمی‌گردیم
                    setTimeout(() => {
                        window.history.back();
                    }, 1000);
                    return true;
                } catch (e) {
                    // ادامه به روش بعدی
                }
            }

            return false;
        }
        //function saveContact(name, phone) {
        //    if (confirm(`برای ذخیره "${name}" در مخاطبین، فایل vcf دانلود خواهد شد. آن را باز کنید تا به اپ مخاطبین منتقل شوید.`)) {
        //        const vCard = `BEGIN:VCARD\nVERSION:3.0\nFN:${name}\nTEL:${phone}\nEND:VCARD`;
        //        const blob = new Blob([vCard], { type: 'text/vcard' });
        //        const url = URL.createObjectURL(blob);
        //        const link = document.createElement('a');
        //        link.href = url;
        //        link.download = `${name}.vcf`;
        //        link.click();
        //    }
        //}
        //0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
        //کپی لینک ویچت
        function copyWechatId() {
            const wechatId = 'Reza_sd1984';
            navigator.clipboard.writeText(wechatId)
                .then(() => {
                    alert('آیدی ویچت کپی شد: ' + wechatId);
                })
                .catch(() => {
                    const tempInput = document.createElement('input');
                    tempInput.value = wechatId;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);
                    alert('آیدی ویچت کپی شد: ' + wechatId);
                });
        }
    </script>

</body>
</html>